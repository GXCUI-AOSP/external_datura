{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2189e97f_60a11f73",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-04-24T19:55:45Z",
      "side": 1,
      "message": "So, currently if an app allows cleartext data (when globally restricted and user set the toggle for an app), if the user then were to toggle global off, the app is still allowed cleartext data in the backend (rule isn\u0027t removed). I would not be in favour of handling it in the backend since it would complicate system code a lot",
      "revId": "4357f9bf6910b5730ecece9c607436b797e0f026",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5f005738_0dfe6e06",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-04-24T19:56:50Z",
      "side": 1,
      "message": "Also, these toggles may allow cleartext data for apps that requested it to be blocked in their manifest (when global restricts we show the option to allow cleartext data)?",
      "parentUuid": "2189e97f_60a11f73",
      "revId": "4357f9bf6910b5730ecece9c607436b797e0f026",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f975d8d4_fca633d4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-04-24T20:39:41Z",
      "side": 1,
      "message": "What other alternative do you propose for handling the first scenario.\n\nAs for the account for the manifest, my comment already should do that.\n\n```\nif targetSdk \u003c P\n  if cleartextTrafficPermitted !\u003d false\n    showToggle()\nelse\n  if cleartextTrafficPermitted \u003d\u003d true\n    showToggle()\n```\n\nThe `cleartextTrafficPermitted` refers to what they have set in their network security config which is set in the manifest. This should all just re-use / copy existing cleratext handling code in frameworks. It\u0027d have to be adapted to live here, but the business logic can remain the same.",
      "parentUuid": "5f005738_0dfe6e06",
      "revId": "4357f9bf6910b5730ecece9c607436b797e0f026",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "297a6d94_054049a2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-04-24T21:40:54Z",
      "side": 1,
      "message": "When the global state is toggled off, the app could send INVALID for all UIDs that had ACCEPT set possibly",
      "parentUuid": "f975d8d4_fca633d4",
      "revId": "4357f9bf6910b5730ecece9c607436b797e0f026",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b752d53e_bb51b8fc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-04-25T14:47:00Z",
      "side": 1,
      "message": "That\u0027d also require separate storage of user-preference of the per-app toggles otherwise they\u0027d get reset when global state is toggled, which\u0027d be bad UX.",
      "parentUuid": "297a6d94_054049a2",
      "revId": "4357f9bf6910b5730ecece9c607436b797e0f026",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fd78da2c_ef985427",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-04-25T18:33:16Z",
      "side": 1,
      "message": "Not necessarily, could also go through all apps and check with the getter function",
      "parentUuid": "b752d53e_bb51b8fc",
      "revId": "4357f9bf6910b5730ecece9c607436b797e0f026",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c4806e8a_d3658392",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-04-25T19:54:13Z",
      "side": 1,
      "message": "If turning off via global toggle sets invalid states for all uids then that\u0027s what the getter would return wouldn\u0027t it?",
      "parentUuid": "fd78da2c_ef985427",
      "revId": "4357f9bf6910b5730ecece9c607436b797e0f026",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4788b5d8_becefbbe",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-04-25T20:07:02Z",
      "side": 1,
      "message": "I mean if we want to send invalid to only the ones that were not already",
      "parentUuid": "c4806e8a_d3658392",
      "revId": "4357f9bf6910b5730ecece9c607436b797e0f026",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7583177c_990e463b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-04-25T20:55:00Z",
      "side": 1,
      "message": "Pinged in group.",
      "parentUuid": "4788b5d8_becefbbe",
      "revId": "4357f9bf6910b5730ecece9c607436b797e0f026",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8c35952_2bfc86e0",
        "filename": "app/src/main/java/org/calyxos/datura/applist/AppListRVAdapter.kt",
        "patchSetId": 11
      },
      "lineNbr": 208,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-04-26T16:23:22Z",
      "side": 1,
      "message": "Instead of completely hiding it could be interesting to keep them visible but disabled (greyed out) so users can see what apps allow cleartext traffic?",
      "range": {
        "startLine": 204,
        "startChar": 16,
        "endLine": 208,
        "endChar": 53
      },
      "revId": "4357f9bf6910b5730ecece9c607436b797e0f026",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5c1ec752_1b96c651",
        "filename": "app/src/main/java/org/calyxos/datura/applist/AppListRVAdapter.kt",
        "patchSetId": 11
      },
      "lineNbr": 208,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-05-17T19:18:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c8c35952_2bfc86e0",
      "range": {
        "startLine": 204,
        "startChar": 16,
        "endLine": 208,
        "endChar": 53
      },
      "revId": "4357f9bf6910b5730ecece9c607436b797e0f026",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}